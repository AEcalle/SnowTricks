{% extends 'base.html.twig' %}

{% block title %}Create Trick{% endblock %}
{% block h1 %}Create Trick{% endblock %}

{% block body %}
<div class="container">
    <div class="row py-5" id="top">
        <div class="col-12">
            {{ form_start(form) }}
                {{ form_errors(form) }}
                {{ form_widget(form._token) }}
                <div class="form-group">
                    <button type="button" class="btn btn-primary mb-3 add_item_link" data-collection="images">Add Image</button>
                </div>
                <div class="row images"
                data-index="{{ form.images|length > 0 ? form.images|last.vars.name + 1 : 0 }}"
                data-prototype="{{ include("trick/_image_template.html.twig", {'form': form.images.vars.prototype})|e('html_attr') }}">
                    {% for image in form.images %}
                        {{ include("trick/_image_template.html.twig", {'form': image}) }}
                    {% endfor %}
                </div>
                <div class="form-group">
                    <button type="button" class="btn btn-primary mb-3 add_item_link" data-collection="videos">Add Video</button>
                </div>
                <div class="row videos"
                data-index="{{ form.videos|length > 0 ? form.videos|last.vars.name + 1 : 0 }}"
                data-prototype="{{ include("trick/_video_template.html.twig", {'form': form.videos.vars.prototype})|e('html_attr') }}">
                    {% for video in form.videos %}
                        {{ include("trick/_video_template.html.twig", {'form': video}) }}
                    {% endfor %}
                </div>
                {{ form_row(form.name) }}
                {{ form_row(form.description) }}
                {{ form_row(form.category) }}
            <button type="submit" class="btn btn-success">Save Trick</button>
            {{ form_end(form, {render_rest: false}) }}
        </div>
    </div>
</div>
{% endblock %}
